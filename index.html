<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BilalAİ - Akıllı Kod Asistanı</title>
    <style>
        :root {
            --bg-color: #131314;
            --sidebar-bg: #1e1f20;
            --text-color: #e3e3e3;
            --accent-color: #8ab4f8;
            --input-bg: #1e1f20;
            --code-bg: #000000;
        }

        body {
            margin: 0; padding: 0;
            font-family: 'Segoe UI', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            display: flex;
            height: 100vh;
        }

        /* SIDEBAR */
        .sidebar {
            width: 260px;
            background-color: var(--sidebar-bg);
            display: flex;
            flex-direction: column;
            padding: 20px;
            border-right: 1px solid #333;
        }

        .brand {
            font-size: 24px;
            font-weight: bold;
            background: linear-gradient(to right, #4b90ff, #ff5546);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 30px;
        }

        /* ANA SOHBET */
        .main { flex: 1; display: flex; flex-direction: column; position: relative; }
        #chatContainer {
            flex: 1;
            overflow-y: auto;
            padding: 40px 15%;
            display: flex;
            flex-direction: column;
            gap: 25px;
        }

        .message { display: flex; gap: 15px; animation: fadeIn 0.3s ease; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        .avatar {
            width: 35px; height: 35px; border-radius: 50%;
            display: flex; align-items: center; justify-content: center; font-weight: bold;
        }
        .ai-avatar { background: linear-gradient(135deg, #4b90ff, #ff5546); }
        .user-avatar { background: #555; }

        /* KOD KUTUSU VE KOPYALAMA */
        .code-container {
            position: relative;
            margin: 10px 0;
            background: var(--code-bg);
            border-radius: 8px;
            border: 1px solid #333;
        }

        pre {
            margin: 0;
            padding: 20px;
            color: #76ff03;
            overflow-x: auto;
            font-family: 'Consolas', monospace;
        }

        .copy-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #333;
            color: #fff;
            border: none;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 12px;
            cursor: pointer;
            transition: 0.2s;
        }

        .copy-btn:hover { background: #555; }
        .copy-btn.success { background: #4caf50; }

        .input-area { padding: 20px 15% 40px 15%; }
        .input-box {
            background: var(--input-bg);
            border: 1px solid #555;
            border-radius: 30px;
            display: flex;
            padding: 5px 20px;
        }

        input {
            flex: 1; background: transparent; border: none;
            color: white; padding: 15px; outline: none;
        }

        button#sendBtn { background: transparent; border: none; color: var(--accent-color); font-size: 24px; cursor: pointer; }

        .gen-img { max-width: 100%; border-radius: 12px; margin-top: 10px; }
    </style>
</head>
<body>

<div class="sidebar">
    <div class="brand">BilalAİ</div>
    <div style="color: #888; font-size: 13px;">Kodlama & Görsel Uzmanı</div>
</div>

<div class="main">
    <div id="chatContainer">
        <div class="message">
            <div class="avatar ai-avatar">B</div>
            <div class="content">Merhaba! Ben <b>BilalAİ</b>. Kod yazabilirim ve kopyalaman için hazır hale getirebilirim. Ne yazmamı istersin?</div>
        </div>
    </div>

    <div class="input-area">
        <div class="input-box">
            <input type="text" id="userInput" placeholder="Kod yazdır veya resim iste..." autocomplete="off">
            <button id="sendBtn">➤</button>
        </div>
    </div>
</div>

<script>
    const chatContainer = document.getElementById('chatContainer');
    const userInput = document.getElementById('userInput');
    const sendBtn = document.getElementById('sendBtn');

    const responses = {
        "kod": "İşte senin için hazırladığım Python kodu:\n\n```python\n# BilalAI tarafından yazıldı\nprint('Merhaba Dünya!')\n\ndef hesapla(x, y):\n    return x * y\n\nprint(hesapla(10, 5))\n```",
        "html": "İşte basit bir HTML yapısı:\n\n```html\n<div class='bilal-ai'>\n  <h1>BilalAI Web Tasarım</h1>\n  <p>Bu kod kopyalanabilir!</p>\n</div>\n```",
        "js": "JavaScript döngü örneği:\n\n```javascript\nfor(let i=0; i<5; i++) {\n  console.log('BilalAI çalışıyor: ' + i);\n}\n```"
    };

    function copyToClipboard(btn, text) {
        navigator.clipboard.writeText(text).then(() => {
            btn.innerText = "Kopyalandı!";
            btn.classList.add('success');
            setTimeout(() => {
                btn.innerText = "Kopyala";
                btn.classList.remove('success');
            }, 2000);
        });
    }

    function appendMessage(role, text) {
        const msgDiv = document.createElement('div');
        msgDiv.className = 'message';
        
        let processedText = text;
        if (text.includes("```")) {
            // Kod bloklarını düzenle ve kopyala butonu ekle
            processedText = text.replace(/```(?:\w+)?\n([\s\S]*?)```/g, (match, code) => {
                const uniqueId = 'code-' + Math.random().toString(36).substr(2, 9);
                return `
                    <div class="code-container">
                        <button class="copy-btn" onclick="copyToClipboard(this, \`${code.trim().replace(/`/g, '\\`').replace(/\$/g, '\\$')}\`)">Kopyala</button>
                        <pre id="${uniqueId}"><code>${code.trim()}</code></pre>
                    </div>`;
            });
        }

        msgDiv.innerHTML = `
            <div class="avatar ${role === 'ai' ? 'ai-avatar' : 'user-avatar'}">${role === 'ai' ? 'B' : 'S'}</div>
            <div class="content">${processedText.replace(/\n/g, '<br>')}</div>
        `;
        
        chatContainer.appendChild(msgDiv);
        chatContainer.scrollTop = chatContainer.scrollHeight;
    }

    function handleChat() {
        const val = userInput.value.trim();
        if (!val) return;

        appendMessage('user', val);
        userInput.value = '';

        setTimeout(() => {
            let reply = "Harika bir soru! Eğer kod yazmamı istersen 'kod yaz' demen yeterli.";
            const low = val.toLowerCase();

            if (low.includes("kod") || low.includes("python")) reply = responses.kod;
            else if (low.includes("html")) reply = responses.html;
            else if (low.includes("js") || low.includes("javascript")) reply = responses.js;
            else if (low.includes("resim") || low.includes("çiz")) {
                appendMessage('ai', "Hemen çiziyorum...");
                const img = document.createElement('img');
                img.src = "[https://picsum.photos/800/450?random=](https://picsum.photos/800/450?random=)" + Math.random();
                img.className = "gen-img";
                chatContainer.lastElementChild.querySelector('.content').appendChild(img);
                chatContainer.scrollTop = chatContainer.scrollHeight;
                return;
            }

            appendMessage('ai', reply);
        }, 600);
    }

    sendBtn.addEventListener('click', handleChat);
    userInput.addEventListener('keypress', (e) => { if(e.key === 'Enter') handleChat(); });
</script>

</body>
</html>
