<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BilalAİ - Akıllı Asistan</title>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: 'Segoe UI', Tahoma, sans-serif; background: #0b0e11; color: #e9edef; height: 100vh; display: flex; flex-direction: column; }
        
        header { background: #202c33; padding: 15px; text-align: center; border-bottom: 1px solid #333; color: #00a884; font-size: 1.2rem; font-weight: bold; }

        #chat-box { flex: 1; overflow-y: auto; padding: 20px; display: flex; flex-direction: column; gap: 15px; }
        
        .msg-wrap { display: flex; flex-direction: column; max-width: 85%; }
        .user { align-self: flex-end; }
        .ai { align-self: flex-start; }

        .label { font-size: 0.75rem; margin-bottom: 3px; font-weight: bold; opacity: 0.8; }
        .user .label { color: #d9dbd3; text-align: right; margin-right: 10px; }
        .ai .label { color: #00a884; margin-left: 10px; }

        .bubble { padding: 10px 15px; border-radius: 12px; position: relative; font-size: 0.95rem; line-height: 1.5; }
        .user .bubble { background: #005c4b; border-top-right-radius: 0; }
        .ai .bubble { background: #202c33; border-top-left-radius: 0; }

        /* Kod Bloğu */
        pre { background: #111b21 !important; padding: 12px; border-radius: 8px; margin: 10px 0; overflow-x: auto; position: relative; border: 1px solid #333; }
        code { font-family: 'Consolas', monospace; color: #4ec9b0; }
        .copy-btn { position: absolute; right: 5px; top: 5px; background: #3b4a54; border: none; color: white; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 10px; }

        .ai-img { width: 100%; max-width: 350px; border-radius: 8px; margin-top: 10px; border: 1px solid #444; }

        .input-container { background: #202c33; padding: 15px; display: flex; gap: 10px; align-items: center; }
        input { flex: 1; background: #2a3942; border: none; padding: 12px; border-radius: 20px; color: white; outline: none; }
        button { background: #00a884; border: none; width: 45px; height: 45px; border-radius: 50%; color: white; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 1.2rem; }
        
        .typing { font-size: 0.8rem; color: #8696a0; padding: 5px 20px; display: none; }
    </style>
</head>
<body>

<header>BilalAİ</header>

<div id="chat-box">
    <div class="msg-wrap ai">
        <div class="label">BilalAİ</div>
        <div class="bubble">Selam dostum! Ben BilalAİ. İstediğini sorabilirsin, kod yazdırabilirsin ya da sadece "bir kedi resmi çiz" diyebilirsin.</div>
    </div>
</div>

<div id="typing" class="typing">BilalAİ düşünüyor...</div>

<div class="input-container">
    <input type="text" id="user-in" placeholder="Mesajınızı buraya yazın...">
    <button id="btn"><i class="fas fa-paper-plane"></i></button>
</div>

<script>
    const chatBox = document.getElementById('chat-box');
    const userIn = document.getElementById('user-in');
    const btn = document.getElementById('btn');
    const typing = document.getElementById('typing');

    function addMsg(text, type) {
        const wrap = document.createElement('div');
        wrap.className = `msg-wrap ${type}`;
        
        const label = document.createElement('div');
        label.className = 'label';
        label.innerText = type === 'user' ? 'Sen' : 'BilalAİ';

        const bubble = document.createElement('div');
        bubble.className = 'bubble';
        
        if (type === 'ai') {
            bubble.innerHTML = marked.parse(text);
            bubble.querySelectorAll('pre').forEach(pre => {
                const b = document.createElement('button');
                b.className = 'copy-btn'; b.innerText = 'Kopyala';
                b.onclick = () => { navigator.clipboard.writeText(pre.innerText.replace('Kopyala', '')); b.innerText = 'Ok!'; };
                pre.appendChild(b);
            });
        } else {
            bubble.innerText = text;
        }

        wrap.appendChild(label);
        wrap.appendChild(bubble);
        chatBox.appendChild(wrap);
        chatBox.scrollTop = chatBox.scrollHeight;
    }

    async function getResponse(msg) {
        typing.style.display = 'block';
        let lowMsg = msg.toLowerCase();
        let response = "";

        // Görsel Oluşturma Mantığı
        if (lowMsg.includes("çiz") || lowMsg.includes("resmi") || lowMsg.includes("yap") || lowMsg.includes("görsel")) {
            let prompt = msg.replace(/(çiz|yap|resmi|görseli|oluştur|bir|tane)/gi, "").trim();
            if(!prompt) prompt = "beautiful scenery";
            const imgUrl = `https://pollinations.ai/p/${encodeURIComponent(prompt)}?width=1024&height=1024&nologo=true`;
            response = `İstediğin görseli hazırladım: \n\n <img src="${imgUrl}" class="ai-img">`;
        } 
        // Kod Yazma Mantığı
        else if (lowMsg.includes("kod") || lowMsg.includes("yaz") || lowMsg.includes("script")) {
            response = "Tabii, işte istediğin kod bloğu:\n\n```javascript\n// BilalAİ tarafından oluşturuldu\nconsole.log('Merhaba Dünya!');\nalert('Kod başarıyla çalışıyor');\n```";
        }
        // Sohbet Mantığı
        else if (lowMsg.includes("nasılsın")) {
            response = "Harikayım dostum, seni sormalı? Senin için bugün neler yapabiliriz?";
        }
        else if (lowMsg.includes("ne yapıyorsun") || lowMsg.includes("napıyorsun")) {
            response = "Sohbet kutusunda seninle konuşuyorum ve yeni şeyler öğreniyorum. Sen ne yapıyorsun?";
        }
        else if (lowMsg.includes("selam") || lowMsg.includes("merhaba")) {
            response = "Selam! Ben BilalAİ. Seninle tanıştığıma memnun oldum.";
        }
        else {
            response = "Seni anlıyorum. Bu konuda daha detaylı bilgi verebilir misin? İstersen bir kod yazabilirim ya da hayalindeki bir şeyi çizebilirim!";
        }

        setTimeout(() => {
            typing.style.display = 'none';
            addMsg(response, 'ai');
        }, 1000);
    }

    function send() {
        const val = userIn.value.trim();
        if(!val) return;
        addMsg(val, 'user');
        userIn.value = '';
        getResponse(val);
    }

    btn.onclick = send;
    userIn.onkeypress = (e) => { if(e.key === 'Enter') send(); };
</script>

</body>
</html>
